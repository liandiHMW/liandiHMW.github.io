(function(t){function e(e){for(var r,i,o=e[0],c=e[1],l=e[2],p=0,d=[];p<o.length;p++)i=o[p],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&d.push(n[i][0]),n[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);u&&u(e);while(d.length)d.shift()();return s.push.apply(s,l||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],r=!0,o=1;o<a.length;o++){var c=a[o];0!==n[c]&&(r=!1)}r&&(s.splice(e--,1),t=i(i.s=a[0]))}return t}var r={},n={app:0},s=[];function i(e){if(r[e])return r[e].exports;var a=r[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=r,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(a,r,function(e){return t[e]}.bind(null,r));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=c;s.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"04e4":function(t,e,a){},"05f6":function(t,e,a){},"562d":function(t,e,a){"use strict";var r=a("7f7a"),n=a.n(r);n.a},"56d7":function(t,e,a){"use strict";a.r(e);var r=a("2b0e"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},s=[],i=(a("5c0b"),a("2877")),o={},c=Object(i["a"])(o,n,s,!1,null,null,null),l=c.exports,u=a("8c4f"),p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box"},[a("van-sticky",[a("div",[a("p",[t._v("ele.me")]),a("p",{directives:[{name:"show",rawName:"v-show",value:!t.login,expression:"!login"}]},[a("router-link",{attrs:{to:"/dl"}},[t._v("登录")]),t._v("|"),a("a",{attrs:{href:"#"}},[t._v("注册")])],1),a("router-link",{directives:[{name:"show",rawName:"v-show",value:t.login,expression:"login"}],attrs:{to:"/user"}},[a("van-icon",{attrs:{name:"https://b.yzcdn.cn/vant/icon-demo-1126.png"}})],1)],1)]),a("div",{staticClass:"content"},[t._m(0),a("div",{staticClass:"top-bj"},[a("span",{on:{click:function(e){return t.tiao(3)}}},[t._v("北京")]),a("span",[t._v(">")])]),a("div",{staticClass:"hot"},[a("p",[t._v("热门城市")]),a("ul",t._l(t.hot,(function(e,r){return a("li",{key:r},[a("span",{on:{click:function(a){return t.tiao(e.id)}}},[t._v(" "+t._s(e.name)+" ")])])})),0)]),a("van-index-bar",{attrs:{"index-list":t.dc,"sticky-offset-top":46}},t._l(t.dc,(function(e,r){return a("div",{key:r,staticClass:"word",attrs:{id:r}},[a("div",[a("van-index-anchor",{attrs:{index:e}}),"A"==r?a("p",[t._v("(按字母排序)")]):t._e()],1),a("ul",t._l(t.city[e],(function(e,r){return a("li",{key:r},[a("span",{on:{click:function(a){return t.tiao(e.id)}}},[t._v(" "+t._s(e.name)+" ")])])})),0)])})),0)],1)],1)},d=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"top"},[a("span",[t._v("当前定位城市：")]),a("span",{staticStyle:{"font-weight":"900"}},[t._v("定位不准时，请在城市列表中选择")])])}],m=a("bc3a"),h=a.n(m);h.a.defaults.withCredentials=!0;const v=h.a.create({baseURL:"http://elm.cangdu.org",timeout:"5000"});v.interceptors.request.use(t=>t),v.interceptors.response.use(t=>t);var f=v;function g(t,e){return f.get(t,{params:e})}function _(t){return g("/v1/cities?type="+t)}var y={props:{},components:{},data(){return{hot:[],city:{},dc:[],login:!1}},computed:{},watch:{},methods:{async tiao(t){let{data:e}=await this.$http.get("http://elm.cangdu.org/v1/cities/"+t);sessionStorage.setItem("city",JSON.stringify(e)),this.$router.push({path:"/city"})}},created(){let t=sessionStorage.getItem("token");this.login=!!t},async mounted(){let{data:t}=await _("hot");this.hot=t;let{data:e}=await _("group");this.city=e,this.dc=Object.keys(e).sort()}},w=y,b=(a("f7a9"),Object(i["a"])(w,p,d,!1,null,"23e0567e",null)),x=b.exports,k=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box"},[a("van-sticky",[a("div",[a("router-link",{attrs:{to:"/pb"}},[t._v("〈")]),a("h2",[t._v("密码登录")])],1)]),a("ul",[a("li",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.arr.phone,expression:"arr.phone"}],attrs:{type:"text",placeholder:"账号"},domProps:{value:t.arr.phone},on:{blur:t.shi,input:function(e){e.target.composing||t.$set(t.arr,"phone",e.target.value)}}})]),a("li",["checkbox"===(t.flag?"password":"text")?a("input",{directives:[{name:"model",rawName:"v-model",value:t.arr.mm,expression:"arr.mm"}],attrs:{placeholder:"密码",type:"checkbox"},domProps:{checked:Array.isArray(t.arr.mm)?t._i(t.arr.mm,null)>-1:t.arr.mm},on:{change:function(e){var a=t.arr.mm,r=e.target,n=!!r.checked;if(Array.isArray(a)){var s=null,i=t._i(a,s);r.checked?i<0&&t.$set(t.arr,"mm",a.concat([s])):i>-1&&t.$set(t.arr,"mm",a.slice(0,i).concat(a.slice(i+1)))}else t.$set(t.arr,"mm",n)}}}):"radio"===(t.flag?"password":"text")?a("input",{directives:[{name:"model",rawName:"v-model",value:t.arr.mm,expression:"arr.mm"}],attrs:{placeholder:"密码",type:"radio"},domProps:{checked:t._q(t.arr.mm,null)},on:{change:function(e){return t.$set(t.arr,"mm",null)}}}):a("input",{directives:[{name:"model",rawName:"v-model",value:t.arr.mm,expression:"arr.mm"}],attrs:{placeholder:"密码",type:t.flag?"password":"text"},domProps:{value:t.arr.mm},on:{input:function(e){e.target.composing||t.$set(t.arr,"mm",e.target.value)}}}),a("Mm",{attrs:{flag:t.flag},on:{dian:t.dian}})],1),a("li",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.arr.yz,expression:"arr.yz"}],attrs:{type:"text",placeholder:"验证码"},domProps:{value:t.arr.yz},on:{input:function(e){e.target.composing||t.$set(t.arr,"yz",e.target.value)}}}),a("img",{attrs:{src:t.img,alt:""}}),a("div",[a("span",[t._v("看不清")]),a("span",{staticStyle:{color:"#3190e8"},on:{click:t.yzm}},[t._v("换一张")])])])]),a("p",[t._v("温馨提示：未注册过的账号，登录时将自动注册")]),a("p",[t._v("注册过的用户可凭账号密码登录")]),a("button",{attrs:{disabled:!t.can},on:{click:t.join}},[t._v("登录")])],1)},$=[],S=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box",class:t.flag?"active":"",on:{click:t.dian}},[a("span"),a("p",[t._v("abc...")])])},C=[],O={name:"Mm",props:["flag"],components:{},data(){return{}},computed:{},watch:{},methods:{dian(){this.$emit("dian")}}},j=O,N=(a("95eb"),Object(i["a"])(j,S,C,!1,null,"4722678f",null)),z=N.exports;h.a.defaults.withCredentials=!0;var E={props:{},data(){return{img:"",arr:{phone:"",mm:"",yz:""},flag:!1,can:!1}},computed:{},watch:{arr:{handler(t){""!=t.phone&&""!=t.mm&&""!=t.yz?this.can=!0:this.can=!1},deep:!0}},methods:{setCookie(t,e,a){var r=new Date;r.setDate(r.getDate()+a),document.cookie=t+"="+e+"; expires="+r.toDateString()},async yzm(){let{data:t}=await this.$site.post("/v1/captchas");this.img=t.code,console.log(this.img)},async join(){this.setCookie("cap",this.arr.yz,2),this.setCookie("SID",100,2);let{data:t}=await h.a.post("/api/v2/login",{username:this.arr.phone,password:this.arr.mm,captcha_code:this.arr.yz});"登陆失败"!=t.message&&(console.log(111),sessionStorage.setItem("token",JSON.stringify(t.user_id)),this.$router.push("/pb"))},dian(){this.flag=!this.flag},shi(){if(!/^1[3456789]\d{9}$/.test(this.arr.phone))return alert("手机号码有误，请重填"),this.arr.phone="",!1}},mounted(){this.yzm()},components:{Mm:z}},P=E,I=(a("664e"),Object(i["a"])(P,k,$,!1,null,"7dfb1226",null)),J=I.exports,M=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box"},[a("van-sticky",[a("div",[a("router-link",{attrs:{to:"/pb"}},[t._v("〈")]),a("h2",[t._v("我的")])],1)]),a("div",{staticClass:"user"},[a("img",{attrs:{src:"//elm.cangdu.org/img/default.jpg",alt:""}}),a("div",[a("p",[t._v(t._s(t.user.username))]),a("span",[a("van-icon",{attrs:{size:"20",name:"graphic"}}),t._v("暂无绑定手机号")],1)]),a("p",[t._v(">")])]),a("ul",{staticClass:"message"},[t._m(0),a("li",[a("p",[a("span",{staticStyle:{color:"#ff5f3e"}},[t._v(t._s(t.user.gift_amount))]),t._v("个")]),a("span",[t._v("我的优惠")])]),t._m(1)]),a("img",{attrs:{src:"5bc7551845977d4fb18e9d91587af3d1.png",alt:""}}),a("ul",{staticClass:"footer"},t._l(t.foot,(function(e){return a("li",{key:e.id,class:e.flag?"active":"",on:{click:function(a){return t.dian(e.id)}}},[a("van-icon",{attrs:{size:"26",name:e.type}}),a("span",[t._v(t._s(e.text))])],1)})),0)],1)},A=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",[a("p",[a("span",{staticStyle:{color:"#f90"}},[t._v("0.00")]),t._v("元")]),a("span",[t._v("我的余额")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",[a("p",[a("span",{staticStyle:{color:"#6ac20b"}},[t._v("0")]),t._v("分")]),a("span",[t._v("我的积分")])])}],D={name:"demo",props:{},components:{},data(){return{user:{},id:sessionStorage.getItem("token"),foot:[{text:"外卖",type:"phone-o",id:0,flag:!1},{text:"搜索",type:"eye-o",id:1,flag:!1},{text:"订单",type:"orders-o",id:2,flag:!1},{text:"我的",type:"manager",id:3,flag:!0}]}},computed:{},watch:{},methods:{dian(t){this.foot[t].flag=!0,this.foot.forEach(e=>{e.id!=t&&(e.flag=!1)}),0==t&&this.$router.push("/site")}},async mounted(){let{data:t}=await this.$http.get("http://elm.cangdu.org/v1/user?user_id="+this.id);this.user=t,console.log(this.user)},created(){}},T=D,q=(a("b59e"),Object(i["a"])(T,M,A,!1,null,"42224eb6",null)),F=q.exports,L=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box"},[a("van-sticky",[a("div",[a("router-link",{attrs:{to:"/pb"}},[t._v("〈")]),a("h2",[t._v(t._s(t.city.name))]),a("router-link",{attrs:{to:"/pb"}},[t._v("切换城市")])],1)]),a("div",{staticClass:"center"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"}],attrs:{type:"text",placeholder:"输入校园、商务楼、地址"},domProps:{value:t.text},on:{input:function(e){e.target.composing||(t.text=e.target.value)}}}),a("button",{on:{click:t.search}},[t._v("提交")]),a("span",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],on:{click:function(e){t.text=""}}},[t._v("❌")])]),a("p",{directives:[{name:"show",rawName:"v-show",value:!t.flag,expression:"!flag"}]},[t._v("搜索历史")]),a("ul",{directives:[{name:"show",rawName:"v-show",value:t.flag,expression:"flag"}]},t._l(t.di,(function(e,r){return a("li",{key:r,on:{click:function(a){return t.dian(e)}}},[a("p",[t._v(t._s(e.name))]),a("span",[t._v(t._s(e.address))])])})),0),a("ul",{directives:[{name:"show",rawName:"v-show",value:!t.flag&&0!=t.arr.length,expression:"!flag&&arr.length!=0"}]},[t._l(t.arr,(function(e,r){return a("li",{key:r,on:{click:function(a){return t.dian(e)}}},[a("p",[t._v(t._s(e.name))]),a("span",[t._v(t._s(e.address))])])})),a("li",{staticClass:"del",on:{click:t.del}},[a("p",[t._v("清空所有")])])],2)],1)},R=[],U={name:"demo",props:{},components:{},data(){return{city:JSON.parse(sessionStorage.getItem("city")),text:"",di:[],flag:!1,arr:JSON.parse(localStorage.getItem("arr"))||[],show:!1}},computed:{},watch:{arr:{handler(t){localStorage.setItem("arr",JSON.stringify(t))},deep:!0},text(t){this.show=""!=t}},methods:{search(){this.flag=!0,this.$http.get(`http://elm.cangdu.org/v1/pois?type=search&city_id=${this.city.id}&keyword=${this.text}`).then(t=>{this.di=t.data})},dian(t){this.arr.unshift(t),localStorage.setItem("arr",JSON.stringify(this.arr.slice(0,5))),this.$router.push("/site")},del(){this.arr=[]}},mounted(){}},B=U,G=(a("562d"),Object(i["a"])(B,L,R,!1,null,"5d56f906",null)),H=G.exports,K=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box"},[a("van-sticky",[a("div",[a("van-icon",{attrs:{name:"search"}}),a("p",[t._v(t._s(t.site))]),a("van-icon",{attrs:{name:"contact"},on:{click:t.tiao}})],1)]),a("div",{staticClass:"center"},[a("van-swipe",{on:{change:t.onChange}},[a("van-swipe-item",[a("ul",t._l(t.nav,(function(e,r){return a("li",{directives:[{name:"show",rawName:"v-show",value:r<8,expression:"index<8"}],key:r},[a("img",{attrs:{src:"https://fuss10.elemecdn.com"+e.image_url,alt:""}}),a("p",[t._v(t._s(e.title))])])})),0)]),a("van-swipe-item",[a("ul",t._l(t.nav,(function(e,r){return a("li",{directives:[{name:"show",rawName:"v-show",value:r>=8,expression:"index>=8"}],key:r},[a("img",{attrs:{src:"https://fuss10.elemecdn.com"+e.image_url,alt:""}}),a("p",[t._v(t._s(e.title))])])})),0)])],1)],1),a("div",{staticClass:"shop"},[a("p",[a("van-icon",{attrs:{size:"16",name:"shop-collect-o"}}),t._v("附近商家")],1),a("ul",t._l(t.shop,(function(e,r){return a("li",{key:r},[a("img",{attrs:{src:"http://elm.cangdu.org/img/"+e.image_path,alt:""}}),a("ol",[a("li",{staticClass:"li-top"},[a("div",[a("p",[t._v("品牌")]),a("h2",[t._v(t._s(e.name))])]),a("span",[t._v("保准票")])]),t._m(0,!0)])])})),0)]),a("ul",{staticClass:"footer"},t._l(t.foot,(function(e){return a("li",{key:e.id,class:e.flag?"active":"",on:{click:function(a){return t.dian(e.id)}}},[a("van-icon",{attrs:{size:"26",name:e.type}}),a("span",[t._v(t._s(e.text))])],1)})),0)],1)},Q=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{staticClass:"li-center"},[a("img",{attrs:{src:"2c7ecd2126c7294ebfbc825b89217dfc.png",alt:""}})])}],V={name:"demo",props:{},components:{},data(){return{foot:[{text:"外卖",type:"phone-o",id:0,flag:!0},{text:"搜索",type:"eye-o",id:1,flag:!1},{text:"订单",type:"orders-o",id:2,flag:!1},{text:"我的",type:"manager",id:3,flag:!1}],nav:[],site:"",shop:[]}},computed:{},watch:{},methods:{tiao(){this.$router.push("/user")},dian(t){this.foot[t].flag=!0,this.foot.forEach(e=>{e.id!=t&&(e.flag=!1)}),3==t&&this.$router.push("/user")},async getSite(){let{data:t}=await this.$site.get("v2/pois/28.234108,113.009931");this.site=t.name;let{data:e}=await this.$http.get("http://elm.cangdu.org/v2/index_entry?geohash=28.234108,113.009931&group_type=1&flags[]=F\n");this.nav=e;let{data:a}=await this.$http.get("http://elm.cangdu.org/shopping/restaurants?latitude=28.234108&longitude=113.009931&offset=0&limit=20&extras[]=activities&keyword=&restaurant_category_id=&restaurant_category_ids[]=&order_by=&delivery_mode[]=");this.shop=a,console.log(this.shop)},onChange(t){}},mounted(){this.getSite()}},W=V,X=(a("c1e5"),Object(i["a"])(W,K,Q,!1,null,"56375595",null)),Y=X.exports;r["a"].use(u["a"]);const Z=[{path:"/",redirect:"/pb"},{path:"/pb",component:x},{path:"/dl",component:J},{path:"/user",component:F},{path:"/city",component:H},{path:"/site",component:Y}],tt=new u["a"]({routes:Z});var et=tt,at=a("2f62");r["a"].use(at["a"]);var rt=new at["a"].Store({state:{},mutations:{},actions:{},modules:{}}),nt=a("b970");a("157a");r["a"].use(nt["a"]),r["a"].config.productionTip=!1,r["a"].prototype.$http=h.a,r["a"].prototype.$site=f,new r["a"]({router:et,store:rt,render:function(t){return t(l)}}).$mount("#app")},"5c0b":function(t,e,a){"use strict";var r=a("9c0c"),n=a.n(r);n.a},"5f60":function(t,e,a){},6627:function(t,e,a){},"664e":function(t,e,a){"use strict";var r=a("6627"),n=a.n(r);n.a},"713a":function(t,e,a){},"7f7a":function(t,e,a){},"95eb":function(t,e,a){"use strict";var r=a("713a"),n=a.n(r);n.a},"9c0c":function(t,e,a){},b59e:function(t,e,a){"use strict";var r=a("04e4"),n=a.n(r);n.a},c1e5:function(t,e,a){"use strict";var r=a("05f6"),n=a.n(r);n.a},f7a9:function(t,e,a){"use strict";var r=a("5f60"),n=a.n(r);n.a}});
//# sourceMappingURL=app.b5ea165c.js.map